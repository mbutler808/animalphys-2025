<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Allison Fisher and Marguerite Butler">
<meta name="dcterms.date" content="2024-11-14">
<meta name="description" content="Recording human brain waves">

<title>Lab 11: Human Electroencephalography (EEG) – ZOOL430 Animal Physiology and Laboratory</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-2c128a76c5dbb243be50ea3089ffe19d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ZOOL430 Animal Physiology and Laboratory</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-general-information" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">General Information</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-general-information">    
        <li>
    <a class="dropdown-item" href="../../syllabus.html">
 <span class="dropdown-text">Syllabus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../schedule.html">
 <span class="dropdown-text">Schedule</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-course-materials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Course Materials</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-course-materials">    
        <li>
    <a class="dropdown-item" href="../../lectures.html">
 <span class="dropdown-text">Lectures</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../labs.html">
 <span class="dropdown-text">Labs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../slides.html">
 <span class="dropdown-text">Slides</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../projects.html">
 <span class="dropdown-text">Projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../resources.html">
 <span class="dropdown-text">Resources</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mbutler808"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/mbutler808"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link active" data-scroll-target="#acknowledgements">Acknowledgements</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a>
  <ul class="collapse">
  <li><a href="#what-you-will-do-in-the-laboratory" id="toc-what-you-will-do-in-the-laboratory" class="nav-link" data-scroll-target="#what-you-will-do-in-the-laboratory">What you will do in the laboratory</a></li>
  <li><a href="#equipment" id="toc-equipment" class="nav-link" data-scroll-target="#equipment">Equipment</a></li>
  </ul></li>
  <li><a href="#procedure" id="toc-procedure" class="nav-link" data-scroll-target="#procedure">Procedure</a>
  <ul class="collapse">
  <li><a href="#subject-preparation" id="toc-subject-preparation" class="nav-link" data-scroll-target="#subject-preparation">Subject preparation</a></li>
  <li><a href="#software-setup" id="toc-software-setup" class="nav-link" data-scroll-target="#software-setup">Software Setup</a></li>
  </ul></li>
  <li><a href="#exercise-1-recognizing-artifacts" id="toc-exercise-1-recognizing-artifacts" class="nav-link" data-scroll-target="#exercise-1-recognizing-artifacts">Exercise 1: Recognizing Artifacts</a>
  <ul class="collapse">
  <li><a href="#analysis-exercise-1-recognizing-artifacts" id="toc-analysis-exercise-1-recognizing-artifacts" class="nav-link" data-scroll-target="#analysis-exercise-1-recognizing-artifacts">Analysis Exercise 1: Recognizing Artifacts</a></li>
  </ul></li>
  <li><a href="#exercise-2-alpha-waves-in-the-eeg" id="toc-exercise-2-alpha-waves-in-the-eeg" class="nav-link" data-scroll-target="#exercise-2-alpha-waves-in-the-eeg">Exercise 2: Alpha Waves in the EEG</a>
  <ul class="collapse">
  <li><a href="#analysis-exercise-2-alpha-waves-in-the-eeg" id="toc-analysis-exercise-2-alpha-waves-in-the-eeg" class="nav-link" data-scroll-target="#analysis-exercise-2-alpha-waves-in-the-eeg">Analysis Exercise 2: Alpha Waves in the EEG</a></li>
  </ul></li>
  <li><a href="#spectral-analysis-tutorial" id="toc-spectral-analysis-tutorial" class="nav-link" data-scroll-target="#spectral-analysis-tutorial">Spectral Analysis Tutorial</a>
  <ul class="collapse">
  <li><a href="#analysis-excercise-2-alpha-waves-in-the-eeg" id="toc-analysis-excercise-2-alpha-waves-in-the-eeg" class="nav-link" data-scroll-target="#analysis-excercise-2-alpha-waves-in-the-eeg">Analysis Excercise 2: Alpha waves in the EEG</a></li>
  </ul></li>
  <li><a href="#exercise-3-note-taking-strategies" id="toc-exercise-3-note-taking-strategies" class="nav-link" data-scroll-target="#exercise-3-note-taking-strategies">Exercise 3: Note Taking Strategies</a>
  <ul class="collapse">
  <li><a href="#analysis-excercise-3-note-taking-strategies" id="toc-analysis-excercise-3-note-taking-strategies" class="nav-link" data-scroll-target="#analysis-excercise-3-note-taking-strategies">Analysis Excercise 3: Note Taking Strategies</a></li>
  </ul></li>
  <li><a href="#food-for-thought" id="toc-food-for-thought" class="nav-link" data-scroll-target="#food-for-thought">Food for thought</a></li>
  <li><a href="#after-lab" id="toc-after-lab" class="nav-link" data-scroll-target="#after-lab">After Lab:</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Lab11.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="Lab11.docx"><i class="bi bi-file-word"></i>MS Word</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 11: Human Electroencephalography (EEG)</h1>
  <div class="quarto-categories">
    <div class="quarto-category">week 13</div>
    <div class="quarto-category">labs</div>
    <div class="quarto-category">electrical activity</div>
    <div class="quarto-category">electrophysiology</div>
    <div class="quarto-category">human</div>
    <div class="quarto-category">EEG</div>
    <div class="quarto-category">brain waves</div>
    <div class="quarto-category">synapses</div>
  </div>
  </div>

<div>
  <div class="description">
    Recording human brain waves
  </div>
</div>

<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://butlerlab.org">Allison Fisher and Marguerite Butler</a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            School of Life Sciences, University of Hawaii
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 14, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="acknowledgements" class="level3">
<h3 class="anchored" data-anchor-id="acknowledgements">Acknowledgements</h3>
<p>Originally written by Allison Fisher and Marguerite Butler 11/06/2023</p>
<p>Additional material for this lab was borrowed and adopted from</p>
<ul>
<li>Electroencephalography Protocol. Written by Staff of ADInstruments for LabChart 8.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prepare for lab by:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Read the lab manual below.</li>
<li>Write the [<a href="../../labs-misc/lab-notebook.html#sec-prelab">Prelab</a>] in your lab notebook. <em><strong>Please DO NOT copy the lab manual word for word.</strong> Your task is to <strong>summarize</strong> the important points that are useful for developing hypotheses for this experiment.</em></li>
<li>This week, draft hypotheses for each experiment.</li>
<li>To obtain feedback from your TAs, <strong>for the prelab please have the hypotheses, figuring out how many ideas you have to cover, and writing a topic sentence for each paragraph:</strong>
<ul>
<li>Umbrella idea</li>
<li>introduce mechanism 1</li>
<li>introduce mechanism 2</li>
<li>…</li>
<li>end with a paragraph of your hypotheses</li>
</ul></li>
<li>For the <strong>methods</strong>, outline:
<ul>
<li>subjects</li>
<li>equipment</li>
<li>experimental treatments (be sure to note what <strong>variables</strong> are changing) and controls or comparisons</li>
<li>analysis</li>
</ul></li>
<li>Do Quiz on Laulima (open 24 hrs before lab).</li>
<li>Please bring a laptop with you to lab, if possible, to analyze your experimental results.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>We will explore the electrical activity of the human brain while doing various activities, using a technique called electroencephalography (EEG). There has been a lot of debate on various modes of study, we will test these ideas by measuring brain activity in two regions of the brain.</li>
</ul>
</div>
</div>
</section>
<section id="background" class="level1">
<h1>Background</h1>
<p>The <strong>cerebral cortex</strong> of the brain is the most developed in mammals and is a major center of information processing and integration (<a href="#fig-brain" class="quarto-xref">Figure&nbsp;1</a>). It plays a key role in many cognitive processes including attention, motor control and sensory-motor integration, memory, and language. The electrical activity of the brain can be measured non-invasively through <strong>electroencephalography</strong> <span class="citation" data-cites="Vibell:2023">(EEG, <a href="#ref-Vibell:2023" role="doc-biblioref">Vibell in prep</a>, <a href="&quot;Chapter 3 - EEG.docx-1.pdf&quot;">link</a>)</span>, and furthermore can be used to monitor brain waves associated with behaviors.</p>
<p>In humans the different regions of the cerebral cortex have been mapped to different functions (<a href="#fig-brain" class="quarto-xref">Figure&nbsp;1</a>). For example the <strong>frontal lobe</strong> <em>integrates</em> many different processes including inputs, outputs, and control of movements (motor behavior), speech, and other behaviors, as well as cognitive and emotional processes. Humans are able to synthesize and prioritize the numerous inputs to produce optimal responses to changes in our environment. The <strong>occipital lobe</strong> plays a major role in visual processing. It is involved in object and facial recognition, depth perception, color recognition, and relays visual information to other regions of the brain. It receives visual information from the retina, but also receives input from other regions of the brain.</p>
<div id="fig-brain" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-brain-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-cerebrum-lobes.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-brain-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: The human cerebrum, annotated with functional regions (lobes). Bectorized by <a href="http://training.seer.cancer.gov/module_anatomy/unit5_3_nerve_org1_cns.html">Jkwchui</a>, CC BY-SA 3.0, <a href="https://commons.wikimedia.org/w/index.php?curid=29055751">original</a>
</figcaption>
</figure>
</div>
<p>EEG is measuring electrical activity from cerebral cortex using skin surface electrodes on the scalp. Although the human brain has about 100 billion neurons, the electrical signals emitted by neurons are weak and have to pass through the cerebrospinal fluid, skull, scalp, and hair before being detected by the electrodes. The EEG technique takes advantage of the fact that the outermost portion of the cerebral cortex have neurons with a particular arrangement of their synapses such that they are all aligned and pointed outward (called “open field”) so that their electrical dipoles align and their signals sum <span class="citation" data-cites="Vibell:2023">(<a href="#ref-Vibell:2023" role="doc-biblioref">Vibell in prep</a>)</span>. Thus what we are actually measuring are the summed activities of a large number of so-called pyrimidal neurons (<a href="#fig-neurons" class="quarto-xref">Figure&nbsp;2 (a)</a>) near the electrodes.</p>
<p>Pyrimidal neurons are the most numerous excitatory neurons in the cerebral cortex <span class="citation" data-cites="Bekkers:2011">(<a href="#ref-Bekkers:2011" role="doc-biblioref">Bekkers 2011</a>)</span>. They transform the sum of synaptic inputs into patterns of action potentials which may travel to other regions of the brain, or to muscle targets far away in the body to signal motor behavior. When we perform EEG we are measuring the activities of many (100s of thousands of) pyrimidal neurons as they go about processing information and coordinating activity.</p>
<div id="fig-neurowave" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-neurowave-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-neurowave" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-neurons" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-neurons-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-pyrimidal-neurons.jpg" class="img-fluid figure-img" data-ref-parent="fig-neurowave">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-neurons-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Pyrimidal neurons are the most common neuron in the cerebral cortex. The name comes from the triangular shape of their soma. UC Regents Davis campus, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>, via Wikimedia Commons
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-neurowave" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-brainwaves" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-brainwaves-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-brainwaves.png" class="img-fluid figure-img" data-ref-parent="fig-neurowave">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-brainwaves-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) EEG wave bands differ in temporal frequency, which can be seen on a very clean raw data trace. Typically as the frequency goes up, the amplitude goes down. Figure from <span class="citation" data-cites="Vibell:2023">Vibell (<a href="#ref-Vibell:2023" role="doc-biblioref">in prep</a>)</span>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-neurowave-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Pyrimidal neurons and the most common EEG wave bands.
</figcaption>
</figure>
</div>
<p>Brain waves can be classified by frequency bands. This means that they have characteristic patterns of oscillation over time (<a href="#fig-brainwaves" class="quarto-xref">Figure&nbsp;2 (b)</a>). One of the earliest uses of EEG was characterizing brain activity during sleep, which led to the definition of alpha (7-13Hz), beta (13-30Hz), theta (3.5-7Hz) and delta (0.5-3.5Hz) waves <a href="#tbl-eegpatterns" class="quarto-xref">Table&nbsp;1</a>. These waves were originally defined during sleep, with the dominance of the different frequences changing with different stages of sleep. They were later discovered to occur with other behavioral states and brain activities.</p>
<div id="tbl-eegpatterns" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[20,20,70]">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-eegpatterns-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: EEG patterns, frequency ranges, and associated behavioral states. Delta, Theta, Alpha, and Beta definitions are from early sleep studies. Slow and fast gamma are associated with cognitive processing. <span class="citation" data-cites="Vibell:2023">(<a href="#ref-Vibell:2023" role="doc-biblioref">Vibell in prep</a>)</span>
</figcaption>
<div aria-describedby="tbl-eegpatterns-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th>EEG pattern</th>
<th>Frequency (Hz)</th>
<th>Behavioral/Psychological State</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Delta</td>
<td>0.5-3.5</td>
<td>Deep, restful sleep; vague dream states.</td>
</tr>
<tr class="even">
<td>Theta</td>
<td>3.5-7</td>
<td>Visual imagery, imagery when falling asleep or just before awakening; light sleep.</td>
</tr>
<tr class="odd">
<td>Alpha</td>
<td>7-13</td>
<td>Awake, non-focused, relaxed, drowsy, or non-vigilant; Low level of environmental stimulation (for example when eyes are closed).</td>
</tr>
<tr class="even">
<td>Beta</td>
<td>13-30</td>
<td>Awake, alert, focused attention or problem-solving; dream/REM sleep; high level of environmental stimulation (for example when eyes are open).</td>
</tr>
<tr class="odd">
<td>Gamma</td>
<td>30-70, &gt;70</td>
<td>Associated with cognitive processing, correlated with large-scale brain networking.</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p><strong>Alpha waves</strong> (8-12 Hz) can be measured spontaneously and are prominent over the occipital (visual) region of the brain. <em>When our eyes are open and are in an alert state</em>, alpha waves tend to be <strong>suppressed</strong>. They are <strong>prominent</strong> when <em>the eyes are closed and we are relaxed</em> (<a href="#tbl-eegpatterns" class="quarto-xref">Table&nbsp;1</a>). You will do an “eyes open/eyes closed” experiment today. <strong>Beta waves</strong> <em>increase when we are alert</em> and are associated with <em>focus or problem-solving</em>. <strong>Gamma waves</strong> are associated with <em>cognitive processing</em>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
It is important to note that
</div>
</div>
<div class="callout-body-container callout-body">
<p>Brain function is extremely complicated and not perfectly understood. In particular, <strong>there is no easy one-to-one interpretation of brain frequencies with particular cogntive functions.</strong> In other words, there are likely to be countless processes that generate similar wave frequencies.</p>
<p><em>However, EEG is very good at detecting brain activity at great temporal and spatial resolution</em>. The most sophisticated systems use 64-256 electrodes mapped across the brain and can provide spatial and temporal resolution in 3D.</p>
<p>We will be using only two sets of electrodes targeting the frontal cortex and the occipital cortex, <em>enough to detect some spatial differences</em> (i.e., frontal vs.&nbsp;occipital lobes), <em>but we will have much better temporal resolution</em> (allowing you to correlate brain activity with events, and hopefully you can obtain clean signals if you can keep the level of noise down).</p>
</div>
</div>
<p><em>Recently, there has been a lot of interest in using EEG to measure brain activity in an educational context.</em> Many studies have established the benefits to learning of taking notes by hand or drawing over typing by computer <span class="citation" data-cites="Meer:2017 Ose-Askvik:2020">(see studies cited in <a href="#ref-Meer:2017" role="doc-biblioref">Meer and Weel 2017</a>; <a href="#ref-Ose-Askvik:2020" role="doc-biblioref">Ose Askvik, Weel, and Meer 2020</a>)</span>. However, whether these can be connected to brain activity is less clear.</p>
<ul>
<li><span class="citation" data-cites="Meer:2017">Meer and Weel (<a href="#ref-Meer:2017" role="doc-biblioref">2017</a>)</span> found that a decrease of lower frequency waves in the theta/alpha bands when drawing over typing, implying that the brain is more receptive to learning.</li>
<li>Describing words (paraphrasing) was associated with an increase in the upper alpha/beta/gamma range (higher frequency waves), especially during ideation (the formatiom of ideas).</li>
<li><span class="citation" data-cites="Ose-Askvik:2020">Ose Askvik, Weel, and Meer (<a href="#ref-Ose-Askvik:2020" role="doc-biblioref">2020</a>)</span> explored brain activity while writing in cursive vs.&nbsp;drawing vs.&nbsp;typing.</li>
</ul>
<p>Your task today is to explore brain activity in the frontal and occipital cortex while the subject performs different tasks. Can you see changes in EEG pattern?</p>
<section id="what-you-will-do-in-the-laboratory" class="level3">
<h3 class="anchored" data-anchor-id="what-you-will-do-in-the-laboratory">What you will do in the laboratory</h3>
<ol type="1">
<li><em>Setup</em>. Check that the equipment are set up correctly and ready to record.</li>
<li><em>Detecting artifacts</em>. You will learn how to indentify artifacts produced by unwanted electrical acticity.</li>
<li><em>Brain activity by notetaking strategy</em>. You will explore the types of brain waves generated while copy text verbatim vs.&nbsp;taking notes in your own words vs.&nbsp;doodling, all of which are modes of interacting with learning materials. You will also compare printing vs.&nbsp;cursive writing vs.&nbsp;typing on a keyboard as well as reading silently (with no notes).</li>
<li><em>Your own experiments</em>.</li>
</ol>
</section>
<section id="equipment" class="level2">
<h2 class="anchored" data-anchor-id="equipment">Equipment</h2>
<ul>
<li>PowerLab data acquisition system</li>
<li>LabChart 8 or later</li>
<li>5 Lead Shielded Bio Amp Cable</li>
<li>EEG Flat Electrodes</li>
<li>Electrode Cream or Paste</li>
<li>Alcohol Swabs</li>
<li>Ace Bandgage</li>
<li>Tape</li>
</ul>
</section>
</section>
<section id="procedure" class="level1">
<h1>Procedure</h1>
<section id="subject-preparation" class="level2">
<h2 class="anchored" data-anchor-id="subject-preparation">Subject preparation</h2>
<ol type="1">
<li><p>Make sure the PowerLab is turned off and the USB cable is connected to the computer.</p></li>
<li><p>Connect the 5 Lead Shielded Bio Amp Cable to the Bio Amp Connector on the front panel of the PowerLab (<a href="#fig-setup" class="quarto-xref">Figure&nbsp;3</a>). The hardware needs to be connected <strong>before</strong> you open the settings file.</p></li>
<li><p>Remove any jewelry from the volunteer’s face, ears, and neck.</p></li>
<li><p>Unwind and straighten all of the flat electrodes. Attach the leads of the EEG Flat Electrodes the pins closest to the labled side of the Bio Amp Cable. You will need all 5 leads.</p></li>
<li><p>Refer to (<a href="#fig-setup" class="quarto-xref">Figure&nbsp;3</a>) for proper electrode placement, but note that we will be using 5 electrodes: two on the frontal lobe and two on the occipital lobe, and a ground.</p></li>
</ol>
<ul>
<li><strong>Frontal lobe</strong>: Channel 1 “positive” and “negative” electrodes will be 3-4cm apart on either side of the forehead.</li>
<li><strong>Occipital lobe</strong>: Channel 2 “positive” and “negative” electrodes will be 3-4cm apart on the back of the head (where the skull bulges out). Place the</li>
<li><strong>Earth electrode</strong> on the bare skin on the bone just behind the ear on the left side.</li>
</ul>
<ol start="6" type="1">
<li><p>For the occipital lobe, it helps to part the hair across the back of the head from side to side to expose the electrode area for the occipital lobe and use hair pins to keep the hair out of the way. For long-haired subjects, rubber bands to make a top-knot ponytail may help.</p></li>
<li><p>You can use a ballpoint pen to lightly mark the skin if you wish. Let the subject abrade their own skin with a fingernail or an alcohol swab to remove dead skin cells. Abrasion helps reduce the skinʻs resistance.</p></li>
<li><p>Apply electrode Paste to the EEG Flat Electrodes. When the skin is dry stick the electrodes to the skin (<a href="#fig-setup" class="quarto-xref">Figure&nbsp;3</a>) and keep the electrodes and wires in place with the medical tape. Avoid air gaps. Wrap the ACE bandage around the head to press the flat electrodes snugly on the head in good contact with the skin.</p></li>
<li><p>Have the volunteer seated in a comfortable position at the table with paper and pen and a laptop in front of them. During the experiment is important to minimize muscle movement and ensure that none of the electrodes are disturbed or compressed.</p></li>
<li><p>Check that all five electrodes are properly connected to the volunteer and the Bio Amp Cable before proceeding. Make sure the electrode wires do not cross over any power cables or electronic equipment. Turn on the PowerLab. (<a href="#fig-setup" class="quarto-xref">Figure&nbsp;3</a>).</p></li>
</ol>
<div id="fig-setup" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-setup-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-eeg-setup.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-setup-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Electrodes and cable setup. We will use five electrodes to record from two channels and a ground. Follow instructions provided by your TA for electrode placement.
</figcaption>
</figure>
</div>
</section>
<section id="software-setup" class="level2">
<h2 class="anchored" data-anchor-id="software-setup">Software Setup</h2>
<ol type="1">
<li><p>Start Chart using the EEG lab settings file. Four channels should appear: the <strong>EEG frontal</strong> and <strong>EEG occipital</strong>, <strong>Alpha power frontal</strong>, and <strong>Alpha power occipital</strong>.</p></li>
<li><p>Make sure that the EEG channels are set to the “Bioamp”. Make sure the settings are as follows: Range 200 <span class="math inline">\(\mu\)</span>V, High Pass 0.5 Hz, and Low Pass 50 Hz (<a href="#fig-bioamp" class="quarto-xref">Figure&nbsp;4</a>). Check that the spectral input is reading the channels for the EEG. You may have to change the inputs to match the correct channel number. If you are using the new setup, you may have to change and restart Chart (several times) with the Bioamp cable connected for it to appear in the menu. If you are using the old setup, the little green light on the front of the Bioamp should be on. Ask your TA for help if needed.</p></li>
</ol>
<div id="fig-bioamp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bioamp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-bioamp-dialog.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bioamp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Check your recording and filter settings in the Bioamp dialog box.
</figcaption>
</figure>
</div>
</section>
</section>
<section id="exercise-1-recognizing-artifacts" class="level1">
<h1>Exercise 1: Recognizing Artifacts</h1>
<ol type="1">
<li><p>Start recording. Ask the volunteer to blink repeatedly and add a comment “blinking”. Stop recording after 10 seconds.</p></li>
<li><p>Record the volunteer making eye movements. Add a comment “eye movements.” Have the volunteer gaze up-and-down and left-and-right in a repeated pattern. Make sure the volunteer is keeping their head still and only moving their eyes.</p></li>
<li><p>Record the volunteer making head movements.</p></li>
<li><p>Record the volunteer making jaw movements.</p></li>
<li><p>Record the volunteer swallowing.</p></li>
<li><p>Save your data, and open a new file with the same settings.</p></li>
</ol>
<section id="analysis-exercise-1-recognizing-artifacts" class="level3">
<h3 class="anchored" data-anchor-id="analysis-exercise-1-recognizing-artifacts">Analysis Exercise 1: Recognizing Artifacts</h3>
<ol type="1">
<li><p>Examine the vertical scale at the left of the Chart View, and note the positions corresponding to +50 <span class="math inline">\(\mu\)</span>V and –50 <span class="math inline">\(\mu\)</span>V. True EEG signals rarely exceed these limits.</p></li>
<li><p>Examine the entire data trace and Autoscale, if necessary. There may be some large signals outside the ±75 <span class="math inline">\(\mu\)</span>V range. Such large signals are artifacts.</p></li>
</ol>
</section>
</section>
<section id="exercise-2-alpha-waves-in-the-eeg" class="level1">
<h1>Exercise 2: Alpha Waves in the EEG</h1>
<p>In this exercise, you will examine the effects of relaxation and eye movement on alpha waves in the EEG.</p>
<ol type="1">
<li><p>Make sure the volunteer is relaxed and comfortable. Have the volunteer close his/her eyes and remain quiet. Keep noise to a minimum and keep all distractions away from the volunteer.</p></li>
<li><p>Start recording. Record for 30 seconds. Prepare a comment with “open;” do not enter it yet.</p></li>
<li><p>Tell the volunteer to open both eyes. Immediately press Return/Enter to add the comment. <em>The subject should not be reading anything or moving their eyes around. Keep head, neck, and eyes very still with the gaze focused on a single point in front of them.</em> Record with the volunteer’s eyes open for 10 seconds. Do not stop recording.</p></li>
<li><p>Prepare a comment with “shut.” When the 10 seconds are complete, tell the volunteer to close both eyes. Immediately press Return/Enter to add the comment.</p></li>
<li><p>Repeat steps 3 and 4 twice, to give you three sets of results. Save your data.</p></li>
</ol>
<section id="analysis-exercise-2-alpha-waves-in-the-eeg" class="level3">
<h3 class="anchored" data-anchor-id="analysis-exercise-2-alpha-waves-in-the-eeg">Analysis Exercise 2: Alpha Waves in the EEG</h3>
<ol type="1">
<li>Examine the entire data trace. Use the View Buttons to change the horizontal compression to see data with eyes open and shut. Make a data selection that includes some data from both eyes open and eyes shut conditions. View this selection in Zoom View. This should make it easier to see the alpha wave activity (<a href="#fig-eeg-raw" class="quarto-xref">Figure&nbsp;5</a>). Now Autoscale, if necessary.</li>
</ol>
<div id="fig-eeg-raw" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eeg-raw-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-eeg-raw.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-eeg-raw-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: EEG signal with eyes shut and open. Note alpha waves during eyes shut.
</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>In Chart View scroll through the “eyes shut” recording to look for alpha waves. Use the View Buttons to change the horizontal compression if necessary. The alpha waves can be recognized by their amplitude (usually 30 to 50 <span class="math inline">\(\mu\)</span>V peak-to-trough, although it can be quite variable) and their frequency. Each cycle of an alpha wave should last approximately 0.1 s.</li>
</ol>
<p><strong>Note: If you cannot find brain activity that matches the alpha rhythm, re-attach the electrodes and repeat this exercise.</strong></p>
<ol start="3" type="1">
<li><p>Use the Marker and Waveform Cursor to measure the amplitude of the alpha waves. Place the Marker at the lowest point of the wave and move the Waveform Cursor to the peak of the wave. Measure the amplitudes of four waves from when the volunteer’s eyes were closed. Record the values in <a href="#tbl-alpha" class="quarto-xref">Table&nbsp;2</a>.</p></li>
<li><p>Now measure wave amplitudes when the volunteer’s eyes were open. Record these values in <a href="#tbl-noalpha" class="quarto-xref">Table&nbsp;3</a>.</p></li>
<li><p>The amplitude of the waves is affected by the quality of the EEG signal. Therefore, it is useful to examine the frequency and power of the wave activity. Spectral analysis can be used to examine these features of a signal. Before examining your EEG signal you will complete a short tutorial on Spectral Analysis.</p></li>
</ol>
<div id="tbl-alpha" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-alpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Alpha waves in eyes closed condition
</figcaption>
<div aria-describedby="tbl-alpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>Amplitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Wave 1</td>
<td></td>
</tr>
<tr class="even">
<td>Wave 2</td>
<td></td>
</tr>
<tr class="odd">
<td>Wave 3</td>
<td></td>
</tr>
<tr class="even">
<td>Wave 4</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="tbl-noalpha" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-noalpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Representative wave amplitude in the eyes open condition (should have fewer alpha waves)
</figcaption>
<div aria-describedby="tbl-noalpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th>Amplitude</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Wave 1</td>
<td></td>
</tr>
<tr class="even">
<td>Wave 2</td>
<td></td>
</tr>
<tr class="odd">
<td>Wave 3</td>
<td></td>
</tr>
<tr class="even">
<td>Wave 4</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
</section>
<section id="spectral-analysis-tutorial" class="level1">
<h1>Spectral Analysis Tutorial</h1>
<p>LabChart provides a module called <strong>Spectrum View</strong> that allows you to observe the <strong>frequency distribution of EEG data</strong> that might not otherwise be easily seen. For example, it could be used to break down an EEG waveform into its various components: beta waves, alpha waves, theta waves and delta waves. Spectrum view conducts a spectral analysis of the data by separting the complex EEG signal into its component waveforms which differ by frequency.</p>
<p>Specifically we will use the <strong><em>fast Fourier transform</em></strong>, which is one method of conducting a spectral analysis on the raw EEG data. It is more important, however, is for you to understand what this method is accomplishing. If we think of the EEG as the sum of many <em>sine waves of many different frequencies</em>, the spectral analysis splits the complex wave into individual wave forms and adds up the numbers of waves of each frequency.</p>
<p>What we see as a result is a plot of the <strong>power</strong> (y-axis) of different frequencies (x-axis) relative to each other in the input signal. Here <em>power</em> is equivalent to <em>amplitude</em> or a <em>count of the numbers</em> of waves at the given frequency along the x-axis. This is called a <strong>Power Spectrum Density (PSD)</strong> plot. The data can also be displayed as 3-dimensional color plot of spectral power, frequency, and time called a <strong>Spectrogram</strong>. (Donʻt get confused, <em>frequency</em> in this context refers to how many Hertz or cycles per second characterize each waveform, not the numbers of waves of each Hz we are counting - the <em>power</em>.)</p>
<ol type="1">
<li><p>Open the <strong>EEG Spectral Analysis Tutorial</strong>. It is in the Welcome Center, under the Experiments tab. It is also on the Animal Physiology Settings Folder.</p></li>
<li><p>Examine the Chart View. Use the View Buttons to view each block. You should see five blocks of data. The first record is a slowly oscillating sine wave</p></li>
<li><p>Open Spectrum view by clicking on the Spectrum View button in the Toolbar (<a href="#fig-button" class="quarto-xref">Figure&nbsp;6</a>).</p></li>
</ol>
<div id="fig-button" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-button-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-spectral-button.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-button-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Spectrum View Toolbar button.
</figcaption>
</figure>
</div>
<ol start="4" type="1">
<li><p>Click the Smart Tile button in the LabChart Toolbar to display both windows in full screen mode.</p></li>
<li><p>In Chart View Select the first record by double clicking in the Time axis. This will perform a spectral analysis for this record and displays the result in the Spectrum view. Adjust the horizontal scaling of plots to view the results:</p></li>
</ol>
<ul>
<li>Set the horizontal scaling for the Power Spectrum Density (PSD) plot to 50 Hz (<a href="#fig-eeg-hz" class="quarto-xref">Figure&nbsp;7</a>). Use the horizontal scroll bar to display the 0 Hz to 50 Hz region of the plot.</li>
</ul>
<div id="fig-eeg-hz" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eeg-hz-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-eeg-hz.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-eeg-hz-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Spectrum PSD Scale.
</figcaption>
</figure>
</div>
<ul>
<li>Set the horizontal scaling for the Spectrogram to 50:1.</li>
</ul>
<ol start="6" type="1">
<li>Examine the PSD plot and then the first section of the Spectrogram. Expand the vertical axes if necessary. Use the waveform cursor to identify the frequency in Hertz (Hz) of the peak in the PSD plot and the band in the Spectrogram. Values are displayed at the top of each plot.</li>
</ol>
<ul>
<li>What is the frequency in Hertz (Hz) of this sine wave? ______</li>
</ul>
<ol start="7" type="1">
<li>Select the second record and again view the result in the Spectrum view.</li>
</ol>
<ul>
<li>What is the frequency in Hertz (Hz) of this second sine wave? _____</li>
</ul>
<ol start="8" type="1">
<li>Select the third record and again view the result in the Spectrum view. You should now see two prominent peaks (PSD plot) and bands (Spectrogram) in the result.</li>
</ol>
<ul>
<li>Are these two peaks/bands the same as for the first two records? _____</li>
</ul>
<ol start="9" type="1">
<li>Select the fourth record and again view the result in the Spectrum view.</li>
</ol>
<ul>
<li>Is there any regular signal within this record? _____</li>
</ul>
<ol start="10" type="1">
<li><p>In Chart View compare the signal amplitudes of the fourth and fifth records. Note that the fifth record has lower amplitude compared with the fourth record.</p></li>
<li><p>Select the fourth record again. In the Spectrum view examine the PSD plot. Move the Waveform Cursor to the prominent peak.</p></li>
</ol>
<ul>
<li><p>What is the frequency (Hz) of this signal? _____</p></li>
<li><p>What is the power (mV2) of this signal? _____</p></li>
</ul>
<ol start="12" type="1">
<li>Select the fifth record and examine the PSD plot. Move the Waveform Cursor to the peak.</li>
</ol>
<ul>
<li><p>What is the frequency (Hz) of this signal? _____</p></li>
<li><p>What is the power (mV2) of this signal? _____</p></li>
</ul>
<ol start="13" type="1">
<li>Examine the Spectrogram. Note that the band corresponding to the signal’s frequency appears to missing. This is because the power of the signal is small compared with the previous four records. Expand the scale on the right hand side of the Spectrogram by setting the scale closer to the power of the signal (e.g., 0 to 0.004 V<span class="math inline">\(^2\)</span>) (<a href="#fig-6a" class="quarto-xref">Figure&nbsp;8</a>, <a href="#fig-6b" class="quarto-xref">Figure&nbsp;9</a>). Note that the band is now visible at the expected frequency.</li>
</ol>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-6a" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-6a-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-6a.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-6a-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Spectrogram drop-down menu
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-6b" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-6b-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-6b.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-6b-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Set scale dialog box
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<ol start="14" type="1">
<li>The fifth record is the same signal as the fourth record, except that the quality of the raw signal has been affected. Compare your features (amplitude, power, frequency) of the fourth and fifth record.</li>
</ol>
<ul>
<li>How has the quality of the signal affected the wave features? _____</li>
</ul>
<section id="analysis-excercise-2-alpha-waves-in-the-eeg" class="level3">
<h3 class="anchored" data-anchor-id="analysis-excercise-2-alpha-waves-in-the-eeg">Analysis Excercise 2: Alpha waves in the EEG</h3>
<p>Now you will use Spectral Analysis to examine the EEG you recorded.</p>
<ol type="1">
<li>Use the View Buttons to change the horizontal compression to 10:1 (<a href="#fig-eeg" class="quarto-xref">Figure&nbsp;10</a>).</li>
</ol>
<div id="fig-eeg" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eeg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-eeg.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-eeg-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10: Alpha Waves with 10:1 Compression
</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>Find the part of the recording when the volunteer had his/her eyes shut. Click-and-drag across this part of the raw data trace to select it. From the Window menu, select Spectrum. In the Spectrum View choose Selected (<a href="#fig-alpha" class="quarto-xref">Figure&nbsp;11</a>).</li>
</ol>
<div id="fig-alpha" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-alpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/lab11-alpha.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-alpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;11: Spectrum of an EEG
</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li><p>Alpha activity shows up in the PSD plot as a clear peak in the 8-12 Hz range. Then print the PSD plot.</p></li>
<li><p>Alpha activity shows up in the Spectrogram as a band of color in the 8-12 Hz range. If you cannot see the alpha activity as a clear peak in the 8-12 Hz range, scale the horizontal and vertical axes. Note that Spectrogram displays all the recorded data and that the selection you have made is highlighted in a darker blue color.</p></li>
<li><p>Make a data selection of several seconds from when the volunteer had their eyes open. Select Spectrum. Note that in the PSD plot the peak in the alpha activity range of 8-12 Hz is small or absent and in the Spectrogram the band of color in the alpha activity range of 8-12 Hz is weak or absent. Print the PSD plot.</p></li>
<li><p>In the Spectrogram scale the horizontal axis so that all the data is visible. Note the presence and absence of the band of color in the alpha activity range of 8-12 Hz which correspond with the eyes shut and eyes open conditions. Save a screenshot of the Spectrogram. You may want to include a representative spectrogram i upur lab report.</p></li>
</ol>
</section>
</section>
<section id="exercise-3-note-taking-strategies" class="level1">
<h1>Exercise 3: Note Taking Strategies</h1>
<p>In this exercise, you will compare abundance of different wave frequencies during various methods of note taking. We record from the frontal and occipital lobes.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Information processing strategies
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><strong>copying</strong>: reproducing information verbatim. Word-for-word.</li>
<li><strong>note taking</strong>: depicting the information content in your own words, whether in sentences, bullet points, or some more flexible format.</li>
<li><strong>drawing</strong>: doodling, drawimg, or making diagrams of the information, which can be labelled.</li>
<li><strong>reading only</strong>: The control. No note taking.</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Modes of note taking
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>handwriting (print)</li>
<li>cursive writing</li>
<li>typing</li>
</ul>
</div>
</div>
<ol type="1">
<li><p>On the desk in front of the subject, there will be a paper with prompts for your learning activities. The experimentor will use a top sheet to cover the prompts, moving it down to expose the next line as you move through each experiment.</p></li>
<li><p>With the subject seated comfortably, start the recording and drop a comment saying <em>“begin hand movement control”</em>. As before during the eyes open/closed trials, the subject will open their eyes, not reading anything and holding very still. This time, have the subject gently move their hand as if they are writing/typing. Record for 30 seconds and drop a comment when done.</p></li>
<li><p>Position the pen and blank paper in front of the subject. Start the recording and drop a comment that says <em>“begin handwritten copying”</em>. Expose the first line on the prompt sheet and have the subject copy it using regular handwriting. Try to only move the hand and wrist while writing. Drop another comment when they have finished writing.</p></li>
<li><p>While still recording, drop another comment saying <em>“begin handwritten notetaking”</em>. Have the subject read the second prompt and take notes (in their own words) using the pen and paper. Drop a comment when finished.</p></li>
<li><p>Repeat steps 3 &amp; 4 two more times. Instead of handwriting print, the subject will run through each trial (copy, note-taking) using cursive handwriting and then typing on a keyboard. Move through the prompts in order, ensuring each is new. Comment appropriately for each exercise (begin cursive copying, begin typing copying, etc.).</p></li>
<li><p>For the 7th prompt on the sheet, have the subject read the sentence and draw a diagram/picture to illustrate what the sentence describes.</p></li>
<li><p>For the 8th prompt on the sheet, have the subject only read the sentence (in their head) without doing any note-taking activity.</p></li>
<li><p>Design your own experiment to test another factor in note taking strategies. For example, having the sentence read aloud to the subject. Record this trial with appropriate commenting.</p></li>
</ol>
<section id="analysis-excercise-3-note-taking-strategies" class="level3">
<h3 class="anchored" data-anchor-id="analysis-excercise-3-note-taking-strategies">Analysis Excercise 3: Note Taking Strategies</h3>
<p>Steps 1-3 <strong>must</strong> be done in class. You can not do this on your home version of LabChart.</p>
<ol type="1">
<li><p>Select a clean section of data in the Chart Window from the first experiment (without any major artifacts). Open the Spectrum view and change the settings to display both <em>“EEG Frontal”</em> and <em>“EEG Occipital”</em> channels.</p></li>
<li><p>In the top menu, select File -&gt; Export -&gt; Spectrum PSD Text file. This will create a text file with the relative abundance of waves at different frequencies for both the frontal and occipital regions. Save this file with a name corresponding to which treatment the data came from, for example, “Handwritten_Copying.txt”.</p></li>
<li><p>Repeat this exporting process for each combination of note taking mode (handwriting, cursive, typing), strategy (copying, note-taking, your choice) as well as drawing and reading only. Also do this process for <em>“eyes open”</em> and <em>“eyes closed”</em> data for control. You should have at least 12 text files total.</p></li>
<li><p>Make a copy of <a href="https://docs.google.com/spreadsheets/d/1NszouoafNYPwEMO5w8iF_cYApgp0K3NM04JTTBrygWI/edit?usp=sharing">this Google sheet</a> and share with your group members. Select the columns in each text file, copy, and paste them into Sheet 1 under the appropriate heading. If inserted correctly, formulas in Sheet 2 will populate with summed values for waves in the <strong>delta</strong>, <strong>theta</strong>, <strong>alpha</strong>, <strong>beta</strong>, and <strong>gamma</strong> frequency ranges. <em>These values tell you the relative abundance, or power, of each type of wave during each experiment.</em> By comparing wave type powers, you can see what types of brain activity are more prevalent in each region.</p></li>
<li><p>Now you can compare the abundance of different wave types in different areas of the brain for each activity. With your group, <strong>come up with at least 6 questions</strong> regarding brain activity during different modes of note taking and show us with appropriate comparisons of your data.</p>
<ol type="i">
<li>One of your questions <strong>must</strong> include comparisons between <em>alpha and beta waves</em> in <em>both brain regions</em> during eyes closed and eyes open.
<ol type="A">
<li>For example, <em>“Do we see a decrease in alpha waves and an increase in beta waves with eyes open?”</em></li>
<li>Make a bar plot for eyes open treatments grouped by brain region versus alpha wave power. If parentheses indicates which bars are side-by-side, it would look like this: Along the x-axis you will have (frontal-eyes open, frontal-eyes closed) a gap, then (occipital-eyes open, occipital eyes closed). Make the same type of bar plot for beta wave power. Arrange the two plots with alpha wave power above the beta wave power so that the brain regions and treatments line up vertically.</li>
</ol></li>
<li>Your second question <strong>must</strong> involve comparing across <em>handwriting, cursive, and typing</em>.
<ol type="A">
<li>For example, <em>“Is there any difference in gamma waves in the frontal lobe across the modes of handwriting, cursive, or typing for the notetaking strategy?”</em></li>
</ol></li>
<li>Come up with two additional questions to address with this dataset. This is a large dataset, we will demonstrate some ways you can manipulate the data by subsetting the larger table to make comparisons easier. We encourage you to explore many aspects of your data to find interesting patterns before deciding on which comparisons to present in your final report.</li>
</ol></li>
</ol>
</section>
</section>
<section id="food-for-thought" class="level1">
<h1>Food for thought</h1>
<ol type="1">
<li><p>How does the human anatomy make it difficult to record and electroencephalogram or EEG?</p></li>
<li><p>What are common causes of the artifacts you recorded in Exercise 1? Name at least 3.</p></li>
<li><p>In exercise 2, under what conditions did you see alpha waves more clearly? What are alpha waves thought to indicate?</p></li>
<li><p>Where do you think motor activity would appear in your data?</p></li>
<li><p>Look at your Spectral Analysis from when the volunteer had their eyes shut. At what range do you have the greatest peak? What type of brain waves does the Spectral Analysis suggest is active? Compare this with the same for the eyes open treatment.</p></li>
<li><p>What is the purpose of taking a control measurement with hand movement only?</p></li>
<li><p>Which activities were easier or more difficult for the subject to perform? Which types of waves are more abundant during more difficult activities?</p></li>
</ol>
</section>
<section id="after-lab" class="level1">
<h1>After Lab:</h1>
<ul>
<li>This will be a group lab report.</li>
<li>Please divide the work of writing the report <strong>by experiment</strong>, so that each person benefits from the experience of writing the intro, methods, results, and discussion. This will also ensure that the ideas are better connected between sections.</li>
<li>Please think about effective figures for this interesting lab, and the results will jump out at you. It will also be easier to write the discussion. In the discussion circle back to the hypothesis and really try to interpret your results in light of physiological mechanisms.</li>
<li>In the discussion end by synthesizing what you learned. Try to bring together aspects of the separate experiments to reflect back on what you learned. What did you learn about the processing of different notetaking strategies or scribing modalities, and anything else you may have tested?</li>
<li>Please remember to include respective contributions.</li>
</ul>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Bekkers:2011" class="csl-entry" role="listitem">
Bekkers, John M. 2011. <span>“Pyramidal Neurons.”</span> <em>Curr Biol</em> 21 (24): R975. <a href="https://doi.org/10.1016/j.cub.2011.10.037">https://doi.org/10.1016/j.cub.2011.10.037</a>.
</div>
<div id="ref-Meer:2017" class="csl-entry" role="listitem">
Meer, Audrey L. H. van der, and F. R. (Ruud) van der Weel. 2017. <span>“Only Three Fingers Write, but the Whole Brain Works†: A High-Density EEG Study Showing Advantages of Drawing over Typing for Learning.”</span> <em>Frontiers in Psychology</em> 8. <a href="https://doi.org/10.3389/fpsyg.2017.00706">https://doi.org/10.3389/fpsyg.2017.00706</a>.
</div>
<div id="ref-Ose-Askvik:2020" class="csl-entry" role="listitem">
Ose Askvik, Eva, F. R. (Ruud) van der Weel, and Audrey L. H. van der Meer. 2020. <span>“The Importance of Cursive Handwriting over Typewriting for Learning in the Classroom: A High-Density EEG Study of 12-Year-Old Children and Young Adults.”</span> <em>Frontiers in Psychology</em> 11. <a href="https://doi.org/10.3389/fpsyg.2020.01810">https://doi.org/10.3389/fpsyg.2020.01810</a>.
</div>
<div id="ref-Vibell:2023" class="csl-entry" role="listitem">
Vibell, Jonas. in prep. <span>“Ch. 3 Electroencephalography.”</span> In.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mbutler808\.github\.io\/animalphys-2025");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>